<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ars Contexta | Library Intake</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <header class="hero">
    <div class="hero-copy">
      <p class="eyebrow">Ars Contexta</p>
      <h1>Build Your Business Context Libraries</h1>
      <p>Answer a few plain-language questions. We will turn your answers into a versioned JSON manifest for baseline library generation.</p>
    </div>
    <div class="hero-actions">
      <button id="btnApplyBankStarter">Use Bank Starter</button>
      <button id="btnExportManifest" class="primary">Download manifest.json</button>
      <button id="btnSaveRevision">Save Revision</button>
    </div>
  </header>

  <main class="shell">
    <section class="progress-wrap">
      <div class="progress-head">
        <h2 id="stepTitle">Step</h2>
        <p id="stepHint"></p>
      </div>
      <div class="progress-track"><div id="progressBar"></div></div>
      <ol id="stepper" class="stepper"></ol>
    </section>

    <section class="help-panel">
      <h3>Help and Examples</h3>
      <p id="helpIntro" class="explain"></p>
      <div class="help-block">
        <strong>What to enter</strong>
        <p id="helpExpected"></p>
      </div>
      <div class="help-block">
        <strong>Good default</strong>
        <p id="helpDefault"></p>
      </div>
      <div class="help-block">
        <strong>Sample answer</strong>
        <p id="helpSample"></p>
      </div>
    </section>
    <section class="panel" id="panelProgram">
      <h3>Program Basics</h3>
      <p class="explain">This gives your workspace a stable identity and owner.</p>
      <div class="grid-2">
        <label>Program name<input id="programName" type="text" placeholder="Bank Business Function Meta-Graph"></label>
        <label>Program ID<input id="programId" type="text" placeholder="bank-context-graph"></label>
        <label>Owner team or unit<input id="ownerUnit" type="text" placeholder="Operations Excellence"></label>
        <label>Main outcome<input id="targetOutcome" type="text" placeholder="Reduce cross-functional process failures"></label>
      </div>
    </section>

    <section class="panel" id="panelInterview">
      <h3>Guided Interview (Optional)</h3>
      <p class="explain">Prefer to talk it through? Answer one prompt at a time and we will fill the form for you.</p>
      <div class="prompt-box">
        <p id="interviewPrompt"></p>
      </div>
      <label>Your answer
        <textarea id="interviewAnswer" rows="4" placeholder="Type your answer in plain language..."></textarea>
      </label>
      <div class="row">
        <button id="btnInterviewApply" class="primary">Apply This Answer</button>
        <button id="btnInterviewNext">Next Prompt</button>
      </div>
    </section>

    <section class="panel" id="panelLibraries">
      <h3>Libraries (Business Functions)</h3>
      <p class="explain">Create one card per function, like Payments Ops or Fraud Ops.</p>
      <button id="btnAddLibrary">Add Library</button>
      <div id="librariesContainer"></div>
    </section>

    <section class="panel" id="panelTerms">
      <h3>Shared Business Terms</h3>
      <p class="explain">Use terms everyone understands the same way across teams.</p>
      <div class="chips" id="entityChips"></div>
      <label>Shared entities (comma-separated)
        <input id="sharedEntities" type="text" placeholder="process, control, risk, metric, exception">
      </label>
      <div class="chips" id="relationshipChips"></div>
      <label>Shared relationship types (comma-separated)
        <input id="sharedRelationships" type="text" placeholder="depends_on, owned_by, mitigates, measured_by">
      </label>
    </section>

    <section class="panel" id="panelHandoffs">
      <h3>Handoffs Between Teams</h3>
      <p class="explain">Describe where work or decisions move between libraries.</p>
      <button id="btnAddLink">Add Handoff</button>
      <div id="linksContainer"></div>
    </section>

    <section class="panel" id="panelArtifact">
      <h3>AI Draft from Documents (Optional)</h3>
      <p class="explain">Paste SOPs, runbooks, or incident summaries. AI can suggest libraries and handoffs. You decide what to apply.</p>
      <label>Artifact text
        <textarea id="artifactText" rows="8" placeholder="Paste source text here..."></textarea>
      </label>
      <label class="file-input">Upload text file
        <input type="file" id="artifactFileInput" accept=".txt,.md,.csv,.log">
      </label>
      <button id="btnSuggestFromArtifact" class="primary">Generate AI Suggestions</button>
      <div id="artifactSuggestions"></div>
    </section>

    <section class="panel" id="panelMap">
      <h3>Visual Library Map</h3>
      <p class="explain">Drag the cards to make the map readable for stakeholders.</p>
      <div class="map-wrap">
        <svg id="mapSvg"></svg>
        <div id="mapBoard"></div>
      </div>
    </section>

    <section class="panel" id="panelGovernance">
      <h3>Governance & Controls</h3>
      <p class="explain">Set minimum controls for consistency and compliance.</p>
      <div class="grid-2">
        <label>Data classification baseline
          <select id="classificationBaseline">
            <option>public</option>
            <option>internal</option>
            <option selected>confidential</option>
            <option>restricted</option>
          </select>
        </label>
        <label>Review cadence
          <select id="reviewCadence">
            <option>weekly</option>
            <option selected>monthly</option>
            <option>quarterly</option>
          </select>
        </label>
        <label>Retention (months)<input id="retentionMonths" type="number" value="36"></label>
        <label>Change approval
          <select id="changeApproval">
            <option>none</option>
            <option>single-approver</option>
            <option selected>dual-approver</option>
            <option>CAB</option>
          </select>
        </label>
        <label class="full">Required provenance fields
          <input id="provenanceFields" type="text" value="source_ref,captured_at,owner_role,confidence,effective_from">
        </label>
      </div>
    </section>

    <section class="panel" id="panelReview">
      <h3>Review, Versioning, and Export</h3>
      <p class="explain">Review your manifest and manage revision history.</p>
      <div class="row tools">
        <button id="btnExportAnswers">Download answers.json</button>
        <button id="btnExportManifest2" class="primary">Download manifest.json</button>
        <label class="file-input">Import JSON
          <input type="file" id="importJsonInput" accept=".json">
        </label>
      </div>
      <div class="row tools">
        <button id="btnLoadRevisions">Refresh Revisions</button>
        <select id="revisionSelect"></select>
        <button id="btnLoadRevision">Load Selected Revision</button>
      </div>
      <pre id="manifestPreview"></pre>
    </section>

    <footer class="wizard-nav">
      <button id="btnPrevStep">Back</button>
      <span id="status"></span>
      <button id="btnNextStep" class="primary">Next</button>
    </footer>
  </main>

  <script src="./app.js"></script>
</body>
</html>


